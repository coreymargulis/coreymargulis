!function(t,e){var o,i='<a tabindex="0" class="wp-color-result" />',r='<div class="wp-picker-holder" />',n='<div class="wp-picker-container" />',l='<input type="button" class="button button-small hidden" />';o={options:{defaultColor:!1,change:!1,clear:!1,hide:!0,palettes:!0},_create:function(){if(t.support.iris){var e=this,o=e.element;t.extend(e.options,o.data()),e.initialValue=o.val(),o.addClass("wp-color-picker").hide().wrap(n),e.wrap=o.parent(),e.toggler=t(i).insertBefore(o).css({backgroundColor:e.initialValue}).attr("title",wpColorPickerL10n.pick).attr("data-current",wpColorPickerL10n.current),e.pickerContainer=t(r).insertAfter(o),e.button=t(l),e.options.defaultColor?e.button.addClass("wp-picker-default").val(wpColorPickerL10n.defaultString):e.button.addClass("wp-picker-clear").val(wpColorPickerL10n.clear),o.wrap('<span class="wp-picker-input-wrap" />').after(e.button),o.iris({target:e.pickerContainer,hide:!0,width:255,mode:"hsv",palettes:e.options.palettes,change:function(o,i){e.toggler.css({backgroundColor:i.color.toString()}),t.isFunction(e.options.change)&&e.options.change.call(this,o,i)}}),o.val(e.initialValue),e._addListeners(),e.options.hide||e.toggler.click()}},_addListeners:function(){var e=this;e.toggler.click(function(o){o.stopPropagation(),e.element.toggle().iris("toggle"),e.button.toggleClass("hidden"),e.toggler.toggleClass("wp-picker-open"),e.toggler.hasClass("wp-picker-open")?t("body").on("click",{wrap:e.wrap,toggler:e.toggler},e._bodyListener):t("body").off("click",e._bodyListener)}),e.element.change(function(o){var i=t(this),r=i.val();(""===r||"#"===r)&&(e.toggler.css("backgroundColor",""),t.isFunction(e.options.clear)&&e.options.clear.call(this,o))}),e.toggler.on("keyup",function(t){(13===t.keyCode||32===t.keyCode)&&(t.preventDefault(),e.toggler.trigger("click").next().focus())}),e.button.click(function(o){var i=t(this);i.hasClass("wp-picker-clear")?(e.element.val(""),e.toggler.css("backgroundColor",""),t.isFunction(e.options.clear)&&e.options.clear.call(this,o)):i.hasClass("wp-picker-default")&&e.element.val(e.options.defaultColor).change()})},_bodyListener:function(t){t.data.wrap.find(t.target).length||t.data.toggler.click()},color:function(t){return t===e?this.element.iris("option","color"):void this.element.iris("option","color",t)},defaultColor:function(t){return t===e?this.options.defaultColor:void(this.options.defaultColor=t)}},t.widget("wp.wpColorPicker",o)}(jQuery);