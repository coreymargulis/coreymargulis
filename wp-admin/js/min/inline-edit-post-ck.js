var inlineEditPost;!function(t){inlineEditPost={init:function(){var e=this,i=t("#inline-edit"),n=t("#bulk-edit");e.type=t("table.widefat").hasClass("pages")?"page":"post",e.what="#post-",i.keyup(function(t){return 27===t.which?inlineEditPost.revert():void 0}),n.keyup(function(t){return 27===t.which?inlineEditPost.revert():void 0}),t("a.cancel",i).click(function(){return inlineEditPost.revert()}),t("a.save",i).click(function(){return inlineEditPost.save(this)}),t("td",i).keydown(function(t){return 13===t.which?inlineEditPost.save(this):void 0}),t("a.cancel",n).click(function(){return inlineEditPost.revert()}),t('#inline-edit .inline-edit-private input[value="private"]').click(function(){var e=t("input.inline-edit-password-input");t(this).prop("checked")?e.val("").prop("disabled",!0):e.prop("disabled",!1)}),t("#the-list").on("click","a.editinline",function(){return inlineEditPost.edit(this),!1}),t("#bulk-title-div").parents("fieldset").after(t("#inline-edit fieldset.inline-edit-categories").clone()).siblings("fieldset:last").prepend(t("#inline-edit label.inline-edit-tags").clone()),t('select[name="_status"] option[value="future"]',n).remove(),t("#doaction, #doaction2").click(function(i){var n=t(this).attr("id").substr(2);"edit"===t('select[name="'+n+'"]').val()?(i.preventDefault(),e.setBulk()):t("form#posts-filter tr.inline-editor").length>0&&e.revert()})},toggle:function(e){var i=this;"none"===t(i.what+i.getId(e)).css("display")?i.revert():i.edit(e)},setBulk:function(){var e="",i=this.type,n,a=!0;return this.revert(),t("#bulk-edit td").attr("colspan",t(".widefat:first thead th:visible").length),t("table.widefat tbody").prepend(t("#bulk-edit")),t("#bulk-edit").addClass("inline-editor").show(),t('tbody th.check-column input[type="checkbox"]').each(function(){if(t(this).prop("checked")){a=!1;var i=t(this).val(),n;n=t("#inline_"+i+" .post_title").html()||inlineEditL10n.notitle,e+='<div id="ttle'+i+'"><a id="_'+i+'" class="ntdelbutton" title="'+inlineEditL10n.ntdeltitle+'">X</a>'+n+"</div>"}}),a?this.revert():(t("#bulk-titles").html(e),t("#bulk-titles a").click(function(){var e=t(this).attr("id").substr(1);t('table.widefat input[value="'+e+'"]').prop("checked",!1),t("#ttle"+e).remove()}),"post"===i&&(n="post_tag",t('tr.inline-editor textarea[name="tax_input['+n+']"]').suggest(ajaxurl+"?action=ajax-tag-search&tax="+n,{delay:500,minchars:2,multiple:!0,multipleSep:inlineEditL10n.comma+" "})),void t("html, body").animate({scrollTop:0},"fast"))},edit:function(e){var i=this,n,a,s,l,o,r,d,p=!0,c,u,h;for(i.revert(),"object"==typeof e&&(e=i.getId(e)),n=["post_title","post_name","post_author","_status","jj","mm","aa","hh","mn","ss","post_password","post_format","menu_order"],"page"===i.type&&n.push("post_parent","page_template"),a=t("#inline-edit").clone(!0),t("td",a).attr("colspan",t(".widefat:first thead th:visible").length),t(i.what+e).hasClass("alternate")&&t(a).addClass("alternate"),t(i.what+e).hide().after(a),s=t("#inline_"+e),t(':input[name="post_author"] option[value="'+t(".post_author",s).text()+'"]',a).val()||t(':input[name="post_author"]',a).prepend('<option value="'+t(".post_author",s).text()+'">'+t("#"+i.type+"-"+e+" .author").text()+"</option>"),1===t(':input[name="post_author"] option',a).length&&t("label.inline-edit-author",a).hide(),u=t(".post_format",s).text(),t("option.unsupported",a).each(function(){var e=t(this);e.val()!==u&&e.remove()}),h=0;h<n.length;h++)t(':input[name="'+n[h]+'"]',a).val(t("."+n[h],s).text());if("open"===t(".comment_status",s).text()&&t('input[name="comment_status"]',a).prop("checked",!0),"open"===t(".ping_status",s).text()&&t('input[name="ping_status"]',a).prop("checked",!0),"sticky"===t(".sticky",s).text()&&t('input[name="sticky"]',a).prop("checked",!0),t(".post_category",s).each(function(){var i,n=t(this).text();n&&(i=t(this).attr("id").replace("_"+e,""),t("ul."+i+"-checklist :checkbox",a).val(n.split(",")))}),t(".tags_input",s).each(function(){var i=t(this).text(),n=t(this).attr("id").replace("_"+e,""),s=t("textarea.tax_input_"+n,a),l=inlineEditL10n.comma;i&&(","!==l&&(i=i.replace(/,/g,l)),s.val(i)),s.suggest(ajaxurl+"?action=ajax-tag-search&tax="+n,{delay:500,minchars:2,multiple:!0,multipleSep:inlineEditL10n.comma+" "})}),l=t("._status",s).text(),"future"!==l&&t('select[name="_status"] option[value="future"]',a).remove(),"private"===l&&(t('input[name="keep_private"]',a).prop("checked",!0),t("input.inline-edit-password-input").val("").prop("disabled",!0)),o=t('select[name="post_parent"] option[value="'+e+'"]',a),o.length>0){for(r=o[0].className.split("-")[1],d=o;p&&(d=d.next("option"),0!==d.length);)c=d[0].className.split("-")[1],r>=c?p=!1:(d.remove(),d=o);o.remove()}return t(a).attr("id","edit-"+e).addClass("inline-editor").show(),t(".ptitle",a).focus(),!1},save:function(e){var i,n,a=t(".post_status_page").val()||"";return"object"==typeof e&&(e=this.getId(e)),t("table.widefat .spinner").show(),i={action:"inline-save",post_type:typenow,post_ID:e,edit_date:"true",post_status:a},n=t("#edit-"+e).find(":input").serialize(),i=n+"&"+t.param(i),t.post(ajaxurl,i,function(i){t("table.widefat .spinner").hide(),i?-1!==i.indexOf("<tr")?(t(inlineEditPost.what+e).remove(),t("#edit-"+e).before(i).remove(),t(inlineEditPost.what+e).hide().fadeIn()):(i=i.replace(/<.[^<>]*?>/g,""),t("#edit-"+e+" .inline-edit-save .error").html(i).show()):t("#edit-"+e+" .inline-edit-save .error").html(inlineEditL10n.error).show(),t("#post-"+e).prev().hasClass("alternate")&&t("#post-"+e).removeClass("alternate")},"html"),!1},revert:function(){var e=t("table.widefat tr.inline-editor").attr("id");return e&&(t("table.widefat .spinner").hide(),"bulk-edit"===e?(t("table.widefat #bulk-edit").removeClass("inline-editor").hide(),t("#bulk-titles").html(""),t("#inlineedit").append(t("#bulk-edit"))):(t("#"+e).remove(),e=e.substr(e.lastIndexOf("-")+1),t(this.what+e).show())),!1},getId:function(e){var i=t(e).closest("tr").attr("id"),n=i.split("-");return n[n.length-1]}},t(document).ready(function(){inlineEditPost.init()}),t(document).on("heartbeat-tick.wp-check-locked-posts",function(e,i){var n=i["wp-check-locked-posts"]||{};t("#the-list tr").each(function(e,i){var a=i.id,s=t(i),l,o;n.hasOwnProperty(a)?s.hasClass("wp-locked")||(l=n[a],s.find(".column-title .locked-text").text(l.text),s.find(".check-column checkbox").prop("checked",!1),l.avatar_src&&(o=t('<img class="avatar avatar-18 photo" width="18" height="18" />').attr("src",l.avatar_src.replace(/&amp;/g,"&")),s.find(".column-title .locked-avatar").empty().append(o)),s.addClass("wp-locked")):s.hasClass("wp-locked")&&s.removeClass("wp-locked").delay(1e3).find(".locked-info span").empty()})}).on("heartbeat-send.wp-check-locked-posts",function(e,i){var n=[];t("#the-list tr").each(function(t,e){e.id&&n.push(e.id)}),n.length&&(i["wp-check-locked-posts"]=n)}).ready(function(){"undefined"!=typeof wp&&wp.heartbeat&&wp.heartbeat.interval(15)})}(jQuery);