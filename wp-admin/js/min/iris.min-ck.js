!function(r,t){function i(){var t,i;l?h="filter":(t=r('<div id="iris-gradtest" />'),i="linear-gradient(top,#fff,#000)",r.each(p,function(r,e){return t.css("backgroundImage",e+i),t.css("backgroundImage").match("gradient")?(h=r,!1):void 0}),h===!1&&(t.css("background","-webkit-gradient(linear,0% 0%,0% 100%,from(#fff),to(#000))"),t.css("backgroundImage").match("gradient")&&(h="webkit")),t.remove())}function e(t,i){return t="top"===t?"top":"left",i=r.isArray(i)?i:Array.prototype.slice.call(arguments,1),"webkit"===h?o(t,i):p[h]+"linear-gradient("+t+", "+i.join(", ")+")"}function s(t,i){var e,s,o,n,c,l,h,p,u;t="top"===t?"top":"left",i=r.isArray(i)?i:Array.prototype.slice.call(arguments,1),e="top"===t?0:1,s=r(this),o=i.length-1,n="filter",c=1===e?"left":"top",l=1===e?"right":"bottom",h=1===e?"height":"width",p='<div class="iris-ie-gradient-shim" style="position:absolute;'+h+":100%;"+c+":%start%;"+l+":%end%;"+n+':%filter%;" data-color:"%color%"></div>',u="","static"===s.css("position")&&s.css({position:"relative"}),i=a(i),r.each(i,function(r,t){var s,a,n;return r===o?!1:(s=i[r+1],void(t.stop!==s.stop&&(a=100-parseFloat(s.stop)+"%",t.octoHex=new Color(t.color).toIEOctoHex(),s.octoHex=new Color(s.color).toIEOctoHex(),n="progid:DXImageTransform.Microsoft.Gradient(GradientType="+e+", StartColorStr='"+t.octoHex+"', EndColorStr='"+s.octoHex+"')",u+=p.replace("%start%",t.stop).replace("%end%",a).replace("%filter%",n))))}),s.find(".iris-ie-gradient-shim").remove(),r(u).prependTo(s)}function o(t,i){var e=[];return t="top"===t?"0% 0%,0% 100%,":"0% 100%,100% 100%,",i=a(i),r.each(i,function(r,t){e.push("color-stop("+parseFloat(t.stop)/100+", "+t.color+")")}),"-webkit-gradient(linear,"+t+e.join(",")+")"}function a(t){var i=[],e=[],s=[],o=t.length-1;return r.each(t,function(r,t){var s=t,o=!1,a=t.match(/1?[0-9]{1,2}%$/);a&&(s=t.replace(/\s?1?[0-9]{1,2}%$/,""),o=a.shift()),i.push(s),e.push(o)}),e[0]===!1&&(e[0]="0%"),e[o]===!1&&(e[o]="100%"),e=n(e),r.each(e,function(r){s[r]={color:i[r],stop:e[r]}}),s}function n(t){var i,e,s,o,a=0,c=t.length-1,l=0,h=!1;if(t.length<=2||r.inArray(!1,t)<0)return t;for(;l<t.length-1;)h||t[l]!==!1?h&&t[l]!==!1&&(c=l,l=t.length):(a=l-1,h=!0),l++;for(e=c-a,o=parseInt(t[a].replace("%"),10),i=(parseFloat(t[c].replace("%"))-o)/e,l=a+1,s=1;c>l;)t[l]=o+s*i+"%",s++,l++;return n(t)}var c,l,h,p,u,d,f,g,v;return c='<div class="iris-picker"><div class="iris-picker-inner"><div class="iris-square"><a class="iris-square-value" href="#"><span class="iris-square-handle ui-slider-handle"></span></a><div class="iris-square-inner iris-square-horiz"></div><div class="iris-square-inner iris-square-vert"></div></div><div class="iris-slider iris-strip"><div class="iris-slider-offset"></div></div></div></div>',f=navigator.userAgent.toLowerCase(),g="Microsoft Internet Explorer"===navigator.appName,v=g?parseFloat(f.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,l=g&&10>v,h=!1,p=["-moz-","-webkit-","-o-","-ms-"],u='.iris-picker{display:block;position:relative}.iris-picker,.iris-picker *{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input+.iris-picker{margin-top:4px}.iris-error{background-color:#ffafaf}.iris-border{border-radius:3px;border:1px solid #aaa;width:200px;background-color:#fff}.iris-picker-inner{position:absolute;top:0;right:0;left:0;bottom:0}.iris-border .iris-picker-inner{top:10px;right:10px;left:10px;bottom:10px}.iris-picker .iris-square-inner{position:absolute;left:0;right:0;top:0;bottom:0}.iris-picker .iris-square,.iris-picker .iris-slider,.iris-picker .iris-square-inner,.iris-picker .iris-palette{border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,.4);height:100%;width:12.5%;float:left;margin-right:5%}.iris-picker .iris-square{width:76%;margin-right:10%;position:relative}.iris-picker .iris-square-inner{width:auto;margin:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-square-inner,.iris-ie-9 .iris-palette{box-shadow:none;border-radius:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-palette{outline:1px solid rgba(0,0,0,.1)}.iris-ie-lt9 .iris-square,.iris-ie-lt9 .iris-slider,.iris-ie-lt9 .iris-square-inner,.iris-ie-lt9 .iris-palette{outline:1px solid #aaa}.iris-ie-lt9 .iris-square .ui-slider-handle{outline:1px solid #aaa;background-color:#fff;-ms-filter:"alpha(Opacity=30)"}.iris-ie-lt9 .iris-square .iris-square-handle{background:0;border:3px solid #fff;-ms-filter:"alpha(Opacity=50)"}.iris-picker .iris-strip{margin-right:0;position:relative}.iris-picker .iris-strip .ui-slider-handle{position:absolute;background:0;margin:0;right:-3px;left:-3px;border:4px solid #aaa;border-width:4px 3px;width:auto;height:6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.2);opacity:.9;z-index:5;cursor:ns-resize}.iris-strip .ui-slider-handle:before{content:" ";position:absolute;left:-2px;right:-2px;top:-3px;bottom:-3px;border:2px solid #fff;border-radius:3px}.iris-picker .iris-slider-offset{position:absolute;top:11px;left:0;right:0;bottom:-3px;width:auto;height:auto;background:transparent;border:0;top:none;border-radius:0}.iris-picker .iris-square-handle{background:transparent;border:5px solid #aaa;border-radius:50%;border-color:rgba(128,128,128,.5);box-shadow:none;width:12px;height:12px;position:absolute;left:-10px;top:-10px;cursor:move;opacity:1;z-index:10}.iris-picker .ui-state-focus .iris-square-handle{opacity:.8}.iris-picker .iris-square-handle:hover{border-color:#999}.iris-picker .iris-square-value:focus .iris-square-handle{box-shadow:0 0 2px rgba(0,0,0,.75);opacity:.8}.iris-picker .iris-square-handle:hover::after{border-color:#fff}.iris-picker .iris-square-handle::after{position:absolute;bottom:-4px;right:-4px;left:-4px;top:-4px;border:3px solid #f9f9f9;border-color:rgba(255,255,255,.8);border-radius:50%;content:" "}.iris-picker .iris-square-value{width:8px;height:8px;position:absolute}.iris-ie-lt9 .iris-square-value,.iris-mozilla .iris-square-value{width:1px;height:1px}.iris-palette-container{position:absolute;bottom:0;left:0;margin:0;padding:0}.iris-border .iris-palette-container{left:10px;bottom:10px}.iris-picker .iris-palette{margin:0;cursor:pointer}',l&&7>=v?(r.fn.iris=r.noop,void(r.support.iris=!1)):(r.support.iris=!0,r.fn.gradient=function(){var t=arguments;return this.each(function(){l?s.apply(this,t):r(this).css("backgroundImage",e.apply(this,t))})},r.fn.raninbowGradient=function(t,i){var e,s,o,a;for(t=t||"top",e=r.extend({},{s:100,l:50},i),s="hsl(%h%,"+e.s+"%,"+e.l+"%)",o=0,a=[];360>=o;)a.push(s.replace("%h%",o)),o+=30;return this.each(function(){r(this).gradient(t,a)})},d={options:{color:!1,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:!0,border:!0,target:!1,width:200,palettes:!1},_color:"",_palettes:["#000","#fff","#d33","#d93","#ee2","#81d742","#1e73be","#8224e3"],_inited:!1,_defaultHSLControls:{horiz:"s",vert:"l",strip:"h"},_defaultHSVControls:{horiz:"h",vert:"v",strip:"s"},_scale:{h:360,s:100,l:100,v:100},_create:function(){var t=this,e=t.element,s=t.options.color||e.val();h===!1&&i(),e.is("input")?(t.picker=t.options.target?r(c).appendTo(t.options.target):r(c).insertAfter(e),t._addInputListeners(e)):(e.append(c),t.picker=e.find(".iris-picker")),g?9===v?t.picker.addClass("iris-ie-9"):8>=v&&t.picker.addClass("iris-ie-lt9"):f.indexOf("compatible")<0&&f.indexOf("khtml")<0&&f.match(/mozilla/)&&t.picker.addClass("iris-mozilla"),t.options.palettes&&t._addPalettes(),t._color=new Color(s).setHSpace(t.options.mode),t.options.color=t._color.toString(),t.controls={square:t.picker.find(".iris-square"),squareDrag:t.picker.find(".iris-square-value"),horiz:t.picker.find(".iris-square-horiz"),vert:t.picker.find(".iris-square-vert"),strip:t.picker.find(".iris-strip"),stripSlider:t.picker.find(".iris-strip .iris-slider-offset")},"hsv"===t.options.mode&&t._has("l",t.options.controls)?t.options.controls=t._defaultHSVControls:"hsl"===t.options.mode&&t._has("v",t.options.controls)&&(t.options.controls=t._defaultHSLControls),t.hue=t._color.h(),t.options.hide&&t.picker.hide(),t.options.border&&t.picker.addClass("iris-border"),t._initControls(),t.active="external",t._dimensions(),t._change()},_has:function(t,i){var e=!1;return r.each(i,function(r,i){return t===i?(e=!0,!1):void 0}),e},_addPalettes:function(){var t=r('<div class="iris-palette-container" />'),i=r('<a class="iris-palette" tabindex="0" />'),e=r.isArray(this.options.palettes)?this.options.palettes:this._palettes;this.picker.find(".iris-palette-container").length&&(t=this.picker.find(".iris-palette-container").detach().html("")),r.each(e,function(r,e){i.clone().data("color",e).css("backgroundColor",e).appendTo(t).height(10).width(10)}),this.picker.append(t)},_paint:function(){var r=this;r._paintDimension("top","strip"),r._paintDimension("top","vert"),r._paintDimension("left","horiz")},_paintDimension:function(r,t){var i,e=this,s=e._color,o=e.options.mode,a=e._getHSpaceColor(),n=e.controls[t],c=e.options.controls;if(t!==e.active&&("square"!==e.active||"strip"===t))switch(c[t]){case"h":if("hsv"===o){switch(a=s.clone(),t){case"horiz":a[c.vert](100);break;case"vert":a[c.horiz](100);break;case"strip":a.setHSpace("hsl")}i=a.toHsl()}else i="strip"===t?{s:a.s,l:a.l}:{s:100,l:a.l};n.raninbowGradient(r,i);break;case"s":"hsv"===o?"vert"===t?i=[s.clone().a(0).s(0).toCSS("rgba"),s.clone().a(1).s(0).toCSS("rgba")]:"strip"===t?i=[s.clone().s(100).toCSS("hsl"),s.clone().s(0).toCSS("hsl")]:"horiz"===t&&(i=["#fff","hsl("+a.h+",100%,50%)"]):i="vert"===t&&"h"===e.options.controls.horiz?["hsla(0, 0%, "+a.l+"%, 0)","hsla(0, 0%, "+a.l+"%, 1)"]:["hsl("+a.h+",0%,50%)","hsl("+a.h+",100%,50%)"],n.gradient(r,i);break;case"l":i="strip"===t?["hsl("+a.h+",100%,100%)","hsl("+a.h+", "+a.s+"%,50%)","hsl("+a.h+",100%,0%)"]:["#fff","rgba(255,255,255,0) 50%","rgba(0,0,0,0) 50%","rgba(0,0,0,1)"],n.gradient(r,i);break;case"v":i="strip"===t?[s.clone().v(100).toCSS(),s.clone().v(0).toCSS()]:["rgba(0,0,0,0)","#000"],n.gradient(r,i)}},_getHSpaceColor:function(){return"hsv"===this.options.mode?this._color.toHsv():this._color.toHsl()},_dimensions:function(t){var i,e,s,o,a=this,n=a.options,c=a.controls,l=c.square,h=a.picker.find(".iris-strip"),p="77.5%",u="12%",d=20,f=n.border?n.width-d:n.width,g=r.isArray(n.palettes)?n.palettes.length:a._palettes.length;return t&&(l.css("width",""),h.css("width",""),a.picker.css({width:"",height:""})),p=f*(parseFloat(p)/100),u=f*(parseFloat(u)/100),i=n.border?p+d:p,l.width(p).height(p),h.height(p).width(u),a.picker.css({width:n.width,height:i}),n.palettes?(e=2*p/100,o=p-(g-1)*e,s=o/g,a.picker.find(".iris-palette").each(function(t){var i=0===t?0:e;r(this).css({width:s,height:s,marginLeft:i})}),a.picker.css("paddingBottom",s+e),void h.height(s+e+p)):a.picker.css("paddingBottom","")},_addInputListeners:function(r){var t=this,i=100,e=function(i){var e=new Color(r.val()),s=r.val().replace(/^#/,"");r.removeClass("iris-error"),e.error?""!==s&&r.addClass("iris-error"):e.toString()!==t._color.toString()&&("keyup"===i.type&&s.match(/^[0-9a-fA-F]{3}$/)||t._setOption("color",e.toString()))};r.on("change",e).on("keyup",t._debounce(e,i)),t.options.hide&&r.one("focus",function(){t.show()})},_initControls:function(){var t=this,i=t.controls,e=i.square,s=t.options.controls,o=t._scale[s.strip];i.stripSlider.slider({orientation:"vertical",max:o,slide:function(r,i){t.active="strip","h"===s.strip&&(i.value=o-i.value),t._color[s.strip](i.value),t._change.apply(t,arguments)}}),i.squareDrag.draggable({containment:"parent",zIndex:1e3,cursor:"move",drag:function(r,i){t._squareDrag(r,i)},start:function(){e.addClass("iris-dragging"),r(this).addClass("ui-state-focus")},stop:function(){e.removeClass("iris-dragging"),r(this).removeClass("ui-state-focus")}}).on("mousedown mouseup",function(i){var e="ui-state-focus";i.preventDefault(),"mousedown"===i.type?(t.picker.find("."+e).removeClass(e).blur(),r(this).addClass(e).focus()):r(this).removeClass(e)}).on("keydown",function(r){var e=i.square,s=i.squareDrag,o=s.position(),a=t.options.width/100;switch(r.altKey&&(a*=10),r.keyCode){case 37:o.left-=a;break;case 38:o.top-=a;break;case 39:o.left+=a;break;case 40:o.top+=a;break;default:return!0}o.left=Math.max(0,Math.min(o.left,e.width())),o.top=Math.max(0,Math.min(o.top,e.height())),s.css(o),t._squareDrag(r,{position:o}),r.preventDefault()}),e.mousedown(function(i){var e,s;1===i.which&&r(i.target).is("div")&&(e=t.controls.square.offset(),s={top:i.pageY-e.top,left:i.pageX-e.left},i.preventDefault(),t._squareDrag(i,{position:s}),i.target=t.controls.squareDrag.get(0),t.controls.squareDrag.css(s).trigger(i))}),t.options.palettes&&t._paletteListeners()},_paletteListeners:function(){var t=this;t.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){t._color.fromCSS(r(this).data("color")),t.active="external",t._change()}).on("keydown.palette",".iris-palette",function(t){return 13!==t.keyCode&&32!==t.keyCode?!0:(t.stopPropagation(),void r(this).click())})},_squareDrag:function(r,t){var i=this,e=i.options.controls,s=i._squareDimensions(),o=Math.round((s.h-t.position.top)/s.h*i._scale[e.vert]),a=i._scale[e.horiz]-Math.round((s.w-t.position.left)/s.w*i._scale[e.horiz]);i._color[e.horiz](a)[e.vert](o),i.active="square",i._change.apply(i,arguments)},_setOption:function(t,i){var e,s,o,a=this,n=a.options[t],c=!1;switch(a.options[t]=i,t){case"color":i=""+i,e=i.replace(/^#/,""),s=new Color(i).setHSpace(a.options.mode),s.error?a.options[t]=n:(a._color=s,a.options.color=a.options[t]=a._color.toString(),a.active="external",a._change());break;case"palettes":c=!0,i?a._addPalettes():a.picker.find(".iris-palette-container").remove(),n||a._paletteListeners();break;case"width":c=!0;break;case"border":c=!0,o=i?"addClass":"removeClass",a.picker[o]("iris-border");break;case"mode":case"controls":if(n===i)return;return o=a.element,n=a.options,n.hide=!a.picker.is(":visible"),a.destroy(),a.picker.remove(),r(a.element).iris(n)}c&&a._dimensions(!0)},_squareDimensions:function(r){var i,e,s=this.controls.square;return r!==t&&s.data("dimensions")?s.data("dimensions"):(e=this.controls.squareDrag,i={w:s.width(),h:s.height()},s.data("dimensions",i),i)},_isNonHueControl:function(r,t){return"square"===r&&"h"===this.options.controls.strip?!0:"external"===t||"h"===t&&"strip"===r?!1:!0},_change:function(){var t=this,i=t.controls,e=t._getHSpaceColor(),s=["square","strip"],o=t.options.controls,a=o[t.active]||"external",n=t.hue;"strip"===t.active?s=[]:"external"!==t.active&&s.pop(),r.each(s,function(r,s){var a,n,c;if(s!==t.active)switch(s){case"strip":a="h"===o.strip?t._scale[o.strip]-e[o.strip]:e[o.strip],i.stripSlider.slider("value",a);break;case"square":n=t._squareDimensions(),c={left:e[o.horiz]/t._scale[o.horiz]*n.w,top:n.h-e[o.vert]/t._scale[o.vert]*n.h},t.controls.squareDrag.css(c)}}),e.h!==n&&t._isNonHueControl(t.active,a)&&t._color.h(n),t.hue=t._color.h(),t.options.color=t._color.toString(),t._inited&&t._trigger("change",{type:t.active},{color:t._color}),t.element.is(":input")&&!t._color.error&&(t.element.removeClass("iris-error"),t.element.val()!==t._color.toString()&&t.element.val(t._color.toString())),t._paint(),t._inited=!0,t.active=!1},_debounce:function(r,t,i){var e,s;return function(){var o,a,n=this,c=arguments;return o=function(){e=null,i||(s=r.apply(n,c))},a=i&&!e,clearTimeout(e),e=setTimeout(o,t),a&&(s=r.apply(n,c)),s}},show:function(){this.picker.show()},hide:function(){this.picker.hide()},toggle:function(){this.picker.toggle()},color:function(r){return r===!0?this._color.clone():r===t?this._color.toString():void this.option("color",r)}},r.widget("a8c.iris",d),void r('<style id="iris-css">'+u+"</style>").appendTo("head"))}(jQuery),function(r,t){var i=function(r,t){return this instanceof i?this._init(r,t):new i(r,t)};i.fn=i.prototype={_color:0,_alpha:1,error:!1,_hsl:{h:0,s:0,l:0},_hsv:{h:0,s:0,v:0},_hSpace:"hsl",_init:function(r){var i="noop";switch(typeof r){case"object":return r.a!==t&&this.a(r.a),i=r.r!==t?"fromRgb":r.l!==t?"fromHsl":r.v!==t?"fromHsv":i,this[i](r);case"string":return this.fromCSS(r);case"number":return this.fromInt(parseInt(r,10))}return this},_error:function(){return this.error=!0,this},clone:function(){for(var r=new i(this.toInt()),t=["_alpha","_hSpace","_hsl","_hsv","error"],e=t.length-1;e>=0;e--)r[t[e]]=this[t[e]];return r},setHSpace:function(r){return this._hSpace="hsv"===r?r:"hsl",this},noop:function(){return this},fromCSS:function(r){var t,i=/^(rgb|hs(l|v))a?\(/;if(this.error=!1,r=r.replace(/^\s+/,"").replace(/\s+$/,"").replace(/;$/,""),r.match(i)&&r.match(/\)$/)){if(t=r.replace(/(\s|%)/g,"").replace(i,"").replace(/,?\);?$/,"").split(","),t.length<3)return this._error();if(4===t.length&&(this.a(parseFloat(t.pop())),this.error))return this;for(var e=t.length-1;e>=0;e--)if(t[e]=parseInt(t[e],10),isNaN(t[e]))return this._error();return r.match(/^rgb/)?this.fromRgb({r:t[0],g:t[1],b:t[2]}):r.match(/^hsv/)?this.fromHsv({h:t[0],s:t[1],v:t[2]}):this.fromHsl({h:t[0],s:t[1],l:t[2]})}return this.fromHex(r)},fromRgb:function(r,i){return"object"!=typeof r||r.r===t||r.g===t||r.b===t?this._error():(this.error=!1,this.fromInt(parseInt((r.r<<16)+(r.g<<8)+r.b,10),i))},fromHex:function(r){return r=r.replace(/^#/,"").replace(/^0x/,""),3===r.length&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]),this.error=!/^[0-9A-F]{6}$/i.test(r),this.fromInt(parseInt(r,16))},fromHsl:function(r){var i,e,s,o,a,n,c,l;return"object"!=typeof r||r.h===t||r.s===t||r.l===t?this._error():(this._hsl=r,this._hSpace="hsl",n=r.h/360,c=r.s/100,l=r.l/100,0===c?i=e=s=l:(o=.5>l?l*(1+c):l+c-l*c,a=2*l-o,i=this.hue2rgb(a,o,n+1/3),e=this.hue2rgb(a,o,n),s=this.hue2rgb(a,o,n-1/3)),this.fromRgb({r:255*i,g:255*e,b:255*s},!0))},fromHsv:function(r){var i,e,s,o,a,n,c,l,h,p,u;if("object"!=typeof r||r.h===t||r.s===t||r.v===t)return this._error();switch(this._hsv=r,this._hSpace="hsv",i=r.h/360,e=r.s/100,s=r.v/100,c=Math.floor(6*i),l=6*i-c,h=s*(1-e),p=s*(1-l*e),u=s*(1-(1-l)*e),c%6){case 0:o=s,a=u,n=h;break;case 1:o=p,a=s,n=h;break;case 2:o=h,a=s,n=u;break;case 3:o=h,a=p,n=s;break;case 4:o=u,a=h,n=s;break;case 5:o=s,a=h,n=p}return this.fromRgb({r:255*o,g:255*a,b:255*n},!0)},fromInt:function(r,i){return this._color=parseInt(r,10),isNaN(this._color)&&(this._color=0),this._color>16777215?this._color=16777215:this._color<0&&(this._color=0),i===t&&(this._hsv.h=this._hsv.s=this._hsl.h=this._hsl.s=0),this},hue2rgb:function(r,t,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?r+6*(t-r)*i:.5>i?t:2/3>i?r+6*(t-r)*(2/3-i):r},toString:function(){var r=parseInt(this._color,10).toString(16);if(this.error)return"";if(r.length<6)for(var t=6-r.length-1;t>=0;t--)r="0"+r;return"#"+r},toCSS:function(r,t){switch(r=r||"hex",t=parseFloat(t||this._alpha),r){case"rgb":case"rgba":var i=this.toRgb();return 1>t?"rgba( "+i.r+", "+i.g+", "+i.b+", "+t+" )":"rgb( "+i.r+", "+i.g+", "+i.b+" )";case"hsl":case"hsla":var e=this.toHsl();return 1>t?"hsla( "+e.h+", "+e.s+"%, "+e.l+"%, "+t+" )":"hsl( "+e.h+", "+e.s+"%, "+e.l+"% )";default:return this.toString()}},toRgb:function(){return{r:255&this._color>>16,g:255&this._color>>8,b:255&this._color}},toHsl:function(){var r,t,i=this.toRgb(),e=i.r/255,s=i.g/255,o=i.b/255,a=Math.max(e,s,o),n=Math.min(e,s,o),c=(a+n)/2;if(a===n)r=t=0;else{var l=a-n;switch(t=c>.5?l/(2-a-n):l/(a+n),a){case e:r=(s-o)/l+(o>s?6:0);break;case s:r=(o-e)/l+2;break;case o:r=(e-s)/l+4}r/=6}return r=Math.round(360*r),0===r&&this._hsl.h!==r&&(r=this._hsl.h),t=Math.round(100*t),0===t&&this._hsl.s&&(t=this._hsl.s),{h:r,s:t,l:Math.round(100*c)}},toHsv:function(){var r,t,i=this.toRgb(),e=i.r/255,s=i.g/255,o=i.b/255,a=Math.max(e,s,o),n=Math.min(e,s,o),c=a,l=a-n;if(t=0===a?0:l/a,a===n)r=t=0;else{switch(a){case e:r=(s-o)/l+(o>s?6:0);break;case s:r=(o-e)/l+2;break;case o:r=(e-s)/l+4}r/=6}return r=Math.round(360*r),0===r&&this._hsv.h!==r&&(r=this._hsv.h),t=Math.round(100*t),0===t&&this._hsv.s&&(t=this._hsv.s),{h:r,s:t,v:Math.round(100*c)}},toInt:function(){return this._color},toIEOctoHex:function(){var r=this.toString(),t=parseInt(255*this._alpha,10).toString(16);return 1===t.length&&(t="0"+t),"#"+t+r.replace(/^#/,"")},toLuminosity:function(){var r=this.toRgb();return.2126*Math.pow(r.r/255,2.2)+.7152*Math.pow(r.g/255,2.2)+.0722*Math.pow(r.b/255,2.2)},getDistanceLuminosityFrom:function(r){if(!(r instanceof i))throw"getDistanceLuminosityFrom requires a Color object";var t=this.toLuminosity(),e=r.toLuminosity();return t>e?(t+.05)/(e+.05):(e+.05)/(t+.05)},getMaxContrastColor:function(){var r=this.toLuminosity(),t=r>=.5?"000000":"ffffff";return new i(t)},getGrayscaleContrastingColor:function(r){if(!r)return this.getMaxContrastColor();var t=5>r?5:r,i=this.getMaxContrastColor();if(r=i.getDistanceLuminosityFrom(this),t>=r)return i;for(var e=0===i.toInt()?1:-1;r>t;)i=i.incrementLightness(e),r=i.getDistanceLuminosityFrom(this);return i},getReadableContrastingColor:function(r,e){if(!r instanceof i)return this;var s=e===t?5:e,o=r.getDistanceLuminosityFrom(this),a=r.getMaxContrastColor(),n=a.getDistanceLuminosityFrom(r);if(s>=n)return a;if(o>=s)return this;for(var c=0===a.toInt()?-1:1;s>o&&(this.incrementLightness(c),o=this.getDistanceLuminosityFrom(r),0!==this._color&&16777215!==this._color););return this},a:function(r){if(r===t)return this._alpha;var i=parseFloat(r);return isNaN(i)?this._error():(this._alpha=i,this)},darken:function(r){return r=r||5,this.l(-r,!0)},lighten:function(r){return r=r||5,this.l(r,!0)},saturate:function(r){return r=r||15,this.s(r,!0)},desaturate:function(r){return r=r||15,this.s(-r,!0)},toGrayscale:function(){return this.setHSpace("hsl").s(0)},getComplement:function(){return this.h(180,!0)},getSplitComplement:function(r){r=r||1;var t=180+30*r;return this.h(t,!0)},getAnalog:function(r){r=r||1;var t=30*r;return this.h(t,!0)},getTetrad:function(r){r=r||1;var t=60*r;return this.h(t,!0)},getTriad:function(r){r=r||1;var t=120*r;return this.h(t,!0)},_partial:function(r){var i=e[r];return function(e,s){var o=this._spaceFunc("to",i.space);return e===t?o[r]:(s===!0&&(e=o[r]+e),i.mod&&(e%=i.mod),i.range&&(e=e<i.range[0]?i.range[0]:e>i.range[1]?i.range[1]:e),o[r]=e,this._spaceFunc("from",i.space,o))}},_spaceFunc:function(r,t,i){var e=t||this._hSpace,s=r+e.charAt(0).toUpperCase()+e.substr(1);return this[s](i)}};var e={h:{mod:360},s:{range:[0,100]},l:{space:"hsl",range:[0,100]},v:{space:"hsv",range:[0,100]},r:{space:"rgb",range:[0,255]},g:{space:"rgb",range:[0,255]},b:{space:"rgb",range:[0,255]}};for(var s in e)e.hasOwnProperty(s)&&(i.fn[s]=i.fn._partial(s));r.Color=i}("object"==typeof exports&&exports||this);